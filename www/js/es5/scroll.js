"use strict";System.register(["main"],function(n,t){function e(){w=document.query("#lock"),y=!!d.posts.get("thread")}function o(){var n=document.body.scrollHeight-window.innerHeight;h=n<=window.scrollY,w&&(w.style.visibility=h?"visible":"hidden")}function r(n){return n&&document.contains(n)}function i(n,t){var e=n.getBoundingClientRect(),o=e.top;return t||o>=0&&o<window.innerHeight?o:null}function l(){if(r(g)){var n=i(g);if(null!==n)return n}for(var t=["article","section","threads"],e=0;e<t.length;e++){var o=t[e],l=!0,c=!1,a=void 0;try{for(var u,d=s.queryAll(o)[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,n=i(f);if(null!==n)return g=f,n}}catch(v){c=!0,a=v}finally{try{!l&&d["return"]&&d["return"]()}finally{if(c)throw a}}}}function c(){if(/^#p\d+$/.test(location.hash)){var n=document.query(location.hash);n&&window.scrollTo(0,i(n)-f.height)}}var a,u,d,s,f,v,h,w,y,g;return{setters:[function(n){a=n.Backbone,u=n.options,d=n.state,s=n.$threads,f=n.$banner,v=n.events}],execute:function(){function t(n){var t=l(),e=n();if(!h||document.hidden&&!u.get("alwaysLock")){if(!r(g))return e;var o=i(g,!0)-t;o&&window.scrollBy(0,o)}else window.scrollTo(0,document.body.scrollHeight);return e}h=void 0,w=void 0,y=void 0,d.page.on("change",e),e(),o(),document.addEventListener("scroll",o),g=void 0,n("followDOM",t),v.reply("scroll:aboveBanner",c),window.onload=c}}});
//# sourceMappingURL=maps/scroll.js.map

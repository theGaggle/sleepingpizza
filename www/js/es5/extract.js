"use strict";System.register([],function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,i,a,s,o,l,u,c;return{setters:[],execute:function(){r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=require("./main"),a=i._,s=i.util,o=i.options,l=i.state,u=i.posts,c=function(){function e(t){n(this,e);var r=i.$threads[0],a=JSON.parse(document.getElementById("postData").innerHTML);if(i.request("notify:title",a.title),!t){var s=this.mine=l.mine.readAll(),u=this.posts=a.posts;this.extractReplies(r),this.extractThreads(r),l.addLinks(a.links);for(var c in u){var m=u[c].links;if(m)for(var f in m)f in s&&i.request("repliedToMe",u[c].num)}o.get("anonymise")&&i.request("loop:anonymise"),i.request("time:render")}}return r(e,[{key:"extractReplies",value:function(e){for(var t=e.getElementsByTagName("article"),n=0,r=t.length;r>n;n++){var i=t[n];new u.Article({model:new u.models.Post(this.extractModel(i)),el:i})}}},{key:"extractThreads",value:function(e){for(var t=e.getElementsByTagName("section"),n=0;n<t.length;n++){var r=t[n],i=this.extractModel(r);new u.Section({model:new u.models.Thread(i),el:r}).renderOmit(),l.syncs[i.num]=i.hctr}}},{key:"extractModel",value:function(e){var t=this.posts[s.getNum(e)];return t.num in this.mine&&(t.mine=!0),t}}]),e}(),module.exports=c,new c(l.page.get("catalog"))}}});
//# sourceMappingURL=maps/extract.js.map

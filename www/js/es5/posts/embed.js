"use strict";System.register([],function(t,e){function r(t,e,r){e||(e={allowFullScreen:"true"}),e.allowScriptAccess="always";var a={autohide:1,fs:1,modestbranding:1,origin:document.location.origin,rel:0,showinfo:0};return r&&(a.start=r),e.autoplay&&(a.autoplay=e.autoplay),e.loop&&(a.loop="1",a.playlist=t),i("<iframe></iframe>",{type:"text/html",src:encodeURI("https://www.youtube.com/embed/"+t)+"?"+i.param(a),frameborder:"0",attr:n(),"class":"youtube-player"})}function n(){return window.screen&&screen.width<=320?{width:250,height:150}:{width:560,height:340}}function a(t,e,r){var n="https://soundcloud.com/oembed?url="+encodeURIComponent(t.getAttribute("href"))+("&maxwidth="+e+"&maxheight=166&auto_play=true&format=json")+"&show_comments=false",a=new XMLHttpRequest;a.open("GET",n),a.responseType="json",a.onload=function(){return 200!==this.status?r(this.status):void r(null,this.response)},a.send()}var o,i,s,u,d,c,h,l,f;return{setters:[],execute:function(){o=require("../main"),i=o.$,s=o.util,u=exports.youtube_url_re=/(?:>>>*?)?(?:https?:\/\/)?(?:www\.|m.)?youtube\.com\/watch\/?\?((?:[^\s#&=]+=[^\s#&]*&)*)?v=([\w-]{11})((?:&[^\s#&=]+=[^\s#&]*)*)&?(#t=[\dhms]{1,9})?/,d=exports.youtube_short_re=/(?:>>>*?)?(?:https?:\/\/)?(?:www\.|m.)?youtu.be\/([\w-]{11})\??(t=[\dhms]{1,9})?/,c=exports.youtube_time_re=/^#t=(?:(\d\d?)h)?(?:(\d{1,3})m)?(?:(\d{1,3})s)?$/,h=exports.youtube_short_time_re=/^t=(?:(\d\d?)h)?(?:(\d{1,3})m)?(?:(\d{1,3})s)?$/,o.$threads.on("click",".watch",function(t){function e(t,e,o){var i=0;if(e){var s=e.match(o);s&&(s[1]&&(i+=3600*parseInt(s[1],10)),s[2]&&(i+=60*parseInt(s[2],10)),s[3]&&(i+=parseInt(s[3],10)))}a.css("width",n().width).append("<br>",r(t,null,i))}if(!(t.which>1||t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)){var a=i(t.target);if(a.is("a")){var o=a.find("iframe");if(o.length)return o.siblings("br").andSelf().remove(),a.css("width","auto"),!1;if(!a.data("noembed")){var s=a.attr("href").match(u);if(!s){if(s=a.attr("href").match(d),!s)return;e(s[1],s[2],h)}return e(s[2],s[4],c),!1}}}}),o.$threads.on("mouseenter",".watch",function(t){function e(t){var e=t&&t.data&&t.data.title;e?(n.textContent=a+": "+e,r.css({color:"black"})):n.textContent=a+" (gone?)",t&&t.data&&t.data.accessControl&&"denied"===t.data.accessControl.embed&&(n.textContent+=" (EMBEDDING DISABLED)",r.data("noembed",!0))}var r=i(t.target);if(!r.data("requestedTitle")){r.data("requestedTitle",!0);var n=r.contents().filter(function(){return 3===this.nodeType})[0];if(n){var a=n.textContent;n.textContent=a+"...";var o=r.attr("href").match(u);if(!o){if(o=r.attr("href").match(d),!o)return;i.ajax({url:"//gdata.youtube.com/feeds/api/videos/"+o[1],data:{v:"2",alt:"jsonc"},dataType:"json",success:e,error:function(){n.textContent=a+"???"}})}i.ajax({url:"//gdata.youtube.com/feeds/api/videos/"+o[2],data:{v:"2",alt:"jsonc"},dataType:"json",success:e,error:function(){n.textContent=a+"???"}})}}}),l=exports.soundcloud_url_re=/(?:>>>*?)?(?:https?:\/\/)?(?:www\.)?soundcloud\.com\/([\w-]{1,40}\/[\w-]{1,80})\/?/,o.$threads.on("click",".soundcloud",function(t){if(!(t.which>1||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)){var e=t.target,r=e.query("iframe");if(t.preventDefault(),r)return r.previousElementSibling.remove(),void r.remove();var n=Math.round(.75*window.innerWidth);a(e,n,function(t,r){return t?alert(t):(e.append(document.createElement("br")),e.append(s.parseDOM(r.html)),void(e.style.width=n+"px"))})}}),o.$threads.on("mouseenter",".soundcloud:not(.fetched)",function(t){var e=t.target,r=e.firstChild,n=r.textContent;r.textContent=n+" ...",a(e,1e3,function(t,a){return t?r.textContent=n+": Error: "+t:(r.textContent=n+": "+a.title,e.style.color="black",void e.classList.add("fetched"))})}),f=exports.pastebin_re=/(?:>>>*?)?(?:https?:\/\/)?(?:www\.|m.)?pastebin\.com\/(.*)/,i(document).on("click",".pastebin",function(t){if(!(t.which>1||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)){var e=i(t.target),r=e.find("iframe");if(r.length)return r.siblings("br").andSelf().remove(),e.css({width:"auto",height:"auto"}),!1;var n=e.attr("href").match(f);if(n){var a=i(window),o=Math.round(.65*a.innerWidth()),s=Math.round(.65*a.innerHeight());return e.css({width:o,height:s}).append("<br>",i("<iframe></iframe>",{type:"text/html",src:"https://pastebin.com/embed_iframe.php?i="+n[1],frameborder:"0",width:o,height:s})),!1}}})}}});
//# sourceMappingURL=../maps/posts/embed.js.map

"use strict";System.register([],function(e,t){var n,r,i,o,a,u,l,s,p;return{setters:[],execute:function(){n=require("../main"),r=n.$,i=n._,o=n.Backbone,a=n.common,u=n.util,l=n.lang,s=n.state,p=module.exports=o.View.extend({className:"popup-menu glass",tagName:"ul",actions:["report","hide"],events:{click:"handleClick"},initialize:function(e){var t=e.parent;t._popup_menu=this,this.parent=t,this.render()},render:function(){var e="",t=!0,n=!1,r=void 0;try{for(var i,o=this.actions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e+='<li data-type="'+a+'">'+l[a]+"</li>"}}catch(s){n=!0,r=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw r}}var p=this.el,c=this.parent;p.innerHTML=e,c.append(p),p.style.left=p.getBoundingClientRect().left-.6*(u.outerWidth(p)+p.offsetWidth)+"px"},handleClick:function(e){e.stopPropagation(),n.request(e.target.getAttribute("data-type"),this.model),this.remove()},remove:function(){this.parent._popup_menu=null,this.el.remove(),this.stopListening()}}),n.reply("menu:extend",function(e){return i.extend(p.prototype.actions,e)}),n.$threads.on("click",".control",function(e){var t=e.target;if(t._popup_menu)return t._popup_menu.remove();var n=u.getModel(t);n&&new p({parent:t,model:n})})}}});
//# sourceMappingURL=../maps/posts/menu.js.map

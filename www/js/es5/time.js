"use strict";System.register([],function(e,t){function n(e){var t=arguments.length<=1||void 0===arguments[1]?m.get("relativeTime"):arguments[1];d.posts.each(function(e){return e.dispatch("renderTime")}),l&&clearTimeout(l),t&&(l=setTimeout(n,6e4))}function r(e){if(f){e.classList.add("timerTicking");var t=e.getAttribute("start"),n=e.getAttribute("end"),r=u.pad(e.getAttribute("hour")),i=u.pad(e.getAttribute("min")),a=u.pad(e.getAttribute("sec"));!function s(){if(document.body.contains(e)){var c=u.serverTime();if(c>n)return e.textContent=o.lang.finished;if(t>c){var m=Math.round((t-c)/1e3);return 10===m&&o.request("time:syncwatch"),e.textContent="Countdown: "+m,setTimeout(s,1e3)}var d=c-t,f=Math.floor(d/1e3/60/60);d-=1e3*f*60*60;var l=Math.floor(d/1e3/60);d-=1e3*l*60;var v=Math.floor(d/1e3);return e.textContent=u.pad(f)+":"+u.pad(l)+":"+u.pad(v)+" / "+r+":"+i+":"+a,setTimeout(s,1e3)}}()}}function i(){setInterval(function(){for(var e=document.getElementsByTagName("syncwatch"),t=0;t<e.length;t++)e[t].classList.contains("timerTicking")||r(e[t])},1e3)}var o,a,s,u,c,m,d,f,l;return{setters:[],execute:function(){o=require("./main"),a=o.$,s=o.Backbone,u=o.common,c=o.oneeSama,m=o.options,d=o.state,f=0,o.dispatcher[u.GET_TIME]=function(e){e[0]&&(f=e[0]-Date.now())},o.reply("time:offset",function(){return f}),l=void 0,o.reply("time:render",n),m.on("change:relativeTime",n),o.defer(n).defer(i).defer(function(){function e(){n=!0,this.removeAttribute("title"),this.style.cursor="default",this.removeEventListener("click",e),t()}function t(){return f?(r.innerHTML=c.readableUTCTime(new Date(u.serverTime()),n),void setTimeout(t,n?1e3:6e4)):setTimeout(t,1e3)}var n=void 0,r=document.getElementById("UTCClock").firstChild;r.addEventListener("click",e),t()})}}});
//# sourceMappingURL=maps/time.js.map

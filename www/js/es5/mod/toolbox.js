"use strict";System.register([],function(e,t){function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var i,l,a,r,s,d,c,g,h,u,f,m,p,b,y,k;return{setters:[],execute:function(){i=o(['<a class="modButton" data-kind="','" title="','">\n					',"\n				</a>"],['<a class="modButton" data-kind="','" title="','">\n					',"\n				</a>"]),l=o(["<style>\n				.postCheckbox {\n					display: inline-block;\n				}\n			</style>"],["<style>\n				.postCheckbox {\n					display: inline-block;\n				}\n			</style>"]),a=o(["<style>\n				header > .mod.addr {\n					display: none;\n				}\n			</style>"],["<style>\n				header > .mod.addr {\n					display: none;\n				}\n			</style>"]),r=require("main"),s=require("./input"),d=require("./panels"),c=require("./util"),g=r.$,h=r._,u=r.Backbone,f=r.common,m=r.lang,p=r.modals,b=f.parseHTML,y={ban:s.ban,log:require("./panels").log,adminPanel:d.adminPanel,notification:s.notification,djPanel:d.djPanel},k=u.View.extend({id:"toolbox",className:"mod modal panel glass",initialize:function(){this.render()},render:function(){var e=this.specs=["clearSelection","spoilerImages","deleteImages","deletePosts","modLog"];"dj"===r.ident.auth&&(e=this.specs=["djPanel"]);var t=[["dj",["toggleMnemonics"]],["moderator",["lockThreads","ban"]],["admin",["sendNotification","renderPanel"]]],n=!0,o=!1,s=void 0;try{for(var d,c=t[Symbol.iterator]();!(n=(d=c.next()).done);n=!0){var h=d.value;if(!f.checkAuth(h[0],r.ident))break;h[1].forEach(function(t){return e.push(t)})}}catch(u){o=!0,s=u}finally{try{!n&&c["return"]&&c["return"]()}finally{if(o)throw s}}for(var p="<span>",y=0;y<e.length;y++){var k=m.mod[e[y]];p+=b(i,y,k[1],k[0])}return p+="</span>",this.$controls=g(p),this.$checkboxToggle=g(b(l)).appendTo("head").prop("disabled",!0),this.$toggle=g('<a id="toolboxToggle">'+m.show+"</a>"),this.$el.prepend(this.$controls,this.$toggle).appendTo(r.$overlay),this.$mnemonicStyle=g(b(a)).appendTo("head").prop("disabled","true"!==localStorage.noMnemonics),this},events:{"click #toolboxToggle":"toggleButtons","click .modButton":"buttonHandler"},toggleButtons:function(){var e=!this.model.get("shown");this.$toggle.text(m[e?"hide":"show"]),this.$controls.toggle(0),this.$checkboxToggle.prop("disabled",!e),this.model.set("shown",e)},buttonHandler:function(e){this[this.specs[e.target.getAttribute("data-kind")]](e)},clearSelection:function(){c.loopCheckboxes(function(e){return e.checked=!1})},toggleMnemonics:function(){var e="true"===localStorage.noMnemonics;this.$mnemonicStyle.prop("disabled",e),localStorage.noMnemonics=!e},send:function(e){r.send([f[e]].concat(n(c.getSelected())))},spoilerImages:function(){this.send("SPOILER_IMAGES")},deleteImages:function(){this.send("DELETE_IMAGES")},toggleChild:function(e){p[e]?p[e].kill():new y[e]},sendNotification:function(){this.toggleChild("notification")},modLog:function(){this.toggleChild("log")},djPanel:function(){this.toggleChild("djPanel")},ban:function(){this.toggleChild("ban")},renderPanel:function(){this.toggleChild("adminPanel")},deletePosts:function(){this.send("DELETE_POSTS")},lockThreads:function(){var e=!0,t=!1,n=void 0;try{for(var o,i=c.getSelected()[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var l=o.value,a=r.state.posts.get(l);a&&!a.get("op")&&r.send([f[a.get("locked")?"UNLOCK_THREAD":"LOCK_THREAD"],l])}}catch(s){t=!0,n=s}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw n}}}}),r.$toolbox=new k({model:new u.Model})}}});
//# sourceMappingURL=../maps/mod/toolbox.js.map

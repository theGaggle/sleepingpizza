{"version":3,"sources":["options/render.js"],"names":["System","register","_export","_context","_taggedTemplateLiteral","strings","raw","Object","freeze","defineProperties","value","renderTab","opts","i","length","html","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","opt","renderOption","err","renderExtras","isShortcut","type","isList","Array","isCheckbox","isNumber","isImage","_lang$labels$opt$id","_slicedToArray","lang","labels","id","label","title","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","item","parseHTML","_templateObject2","modes","_templateObject3","links","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_lang$labels$id","_templateObject4","attrs","name","parseAttributes","filter","options","ln","_templateObject","tabs","_loop","tab","load","hidden","data-content","class","setters","_vendorUnderscore","_util","_opts","_lang","execute","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","push","isArray","TypeError"],"mappings":"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","file":"options/render.js","sourcesContent":["import {filter} from '../../vendor/underscore'\nimport {parseHTML, parseAttributes} from '../util'\nimport options from \"./opts\"\nimport ln from 'lang'\n\nconst lang = ln.opts\n\n/**\n * Render the inner HTML of the options panel\n */\nexport default function () {\n\tlet html = '<ul class=\"option_tab_sel\">'\n\tconst {tabs} = lang,\n\t\topts = []\n\n\t// Render tab butts\n\tfor (let i = 0; i < tabs.length; i++) {\n\t\t// Pick the options for this specific tab, according to current\n\t\t// template and server configuration\n\t\topts[i] = filter(options, opt =>\n\t\t\topt.tab === i\n\t\t\t\t&& (opt.load === undefined  || opt.load)\n\t\t\t\t&& !opt.hidden)\n\n\t\tif (!opts[i].length) {\n\t\t\tcontinue\n\t\t}\n\t\tconst attrs = {\n\t\t\t'data-content': `tab-${i}`,\n\t\t\tclass: 'tab_link'\n\t\t}\n\n\t\t// Highlight the first tabButt by default\n\t\tif (i === 0) {\n\t\t\tattrs.class += ' tab_sel'\n\t\t}\n\t\thtml += parseHTML\n\t\t\t`<li>\n\t\t\t\t<a ${parseAttributes(attrs)}>\n\t\t\t\t\t${tabs[i]}\n\t\t\t\t</a>\n\t\t\t</li>`\n\t}\n\n\thtml += '</ul><ul class=\"option_tab_cont\">'\n\tfor (let i = 0; i < opts.length; i++) {\n\t\thtml += renderTab(opts[i], i)\n\t}\n\thtml += '</ul>'\n\n\treturn html\n}\n\n/**\n * Render tab contents\n */\nfunction renderTab(opts, i) {\n\tif (!opts.length) {\n\t\treturn ''\n\t}\n\tlet html = \"\"\n\thtml += `<li class=\"tab-${i}`\n\n\t// Show the first tab by default\n\tif (i === 0) {\n\t\thtml += ' tab_sel'\n\t}\n\thtml += '\">'\n\n\t// Render the actual options\n\tfor (let opt of opts) {\n\t\thtml += renderOption(opt)\n\t}\n\n\tif (i === 0) {\n\t\thtml += renderExtras()\n\t}\n\thtml += '</li>'\n\n\treturn html\n}\n\n/**\n * Render a single option from it's schema\n */\nfunction renderOption(opt) {\n\tlet html = ''\n\tconst isShortcut = opt.type === 'shortcut',\n\t\tisList = opt.type instanceof Array,\n\t\tisCheckbox = opt.type === 'checkbox' || opt.type === undefined,\n\t\tisNumber = opt.type === 'number',\n\t\tisImage = opt.type === 'image'\n\tif (isShortcut) {\n\t\thtml += 'Alt+'\n\t}\n\tif (!isList) {\n\t\thtml += '<input'\n\t\tif (isCheckbox || isImage)\n\t\t\thtml += ` type=\"${(isCheckbox ? 'checkbox' : 'file')}\"`\n\t\telse if (isNumber)\n\t\t\thtml += ' style=\"width: 4em;\" maxlength=\"4\"'\n\t\telse if (isShortcut)\n\t\t\thtml += ' maxlength=\"1\"'\n\t} else {\n\t\thtml += '<select'\n\t}\n\n\tconst [label,title] = lang.labels[opt.id]\n\thtml += ` id=\"${opt.id}\" title=\"${title}\">`\n\n\tif (isList) {\n\t\tfor (let item of opt.type) {\n\t\t\thtml += parseHTML\n\t\t\t\t`<option value=\"${item}\">\n\t\t\t\t\t${lang.modes[item] || item}\n\t\t\t\t</option>`\n\t\t}\n\t\thtml += '</select>'\n\t}\n\thtml += parseHTML\n\t\t`<label for=\"${opt.id}\" title=\"${title}\">\n\t\t\t${label}\n\t\t</label>\n\t\t<br>`\n\n\treturn html\n}\n\n/**\n * Hidden post reset, Export and Import links to first tab\n */\nfunction renderExtras() {\n\tlet html = '<br>'\n\tconst links = ['export', 'import', 'hidden']\n\tfor (let id of links) {\n\t\tconst [label, title] = lang.labels[id]\n\t\thtml += parseHTML\n\t\t\t`<a id=\"${id}\" title=\"${title}\">\n\t\t\t\t${label}\n\t\t\t</a> `\n\t}\n\n\t// Hidden file input for uploading the JSON\n\tconst attrs = {\n\t\ttype: 'file',\n\t\tid: 'importSettings',\n\t\tname: \"Import Settings\"\n\t}\n\thtml += `<input ${parseAttributes(attrs)}>`\n\n\treturn html\n}\n"],"sourceRoot":"/source/"}
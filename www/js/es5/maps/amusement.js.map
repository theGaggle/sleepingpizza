{"version":3,"sources":["amusement.js"],"names":["System","register","_export","_context","_slicedToArray","main","$","common","state","oneeSama","setters","execute","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","length","err","Array","isArray","Object","TypeError","require","hook","imouto","queueRoll","bit","number","this","allRolls","sent","info","$tag","callback","strong","dice","readable_dice","seen","_ref","postForm","request","rolls","lim","n","r","html","dispatcher","EXECUTE_JS","_ref2","_ref3","js","eval","e","console","error"],"mappings":"AAAA,YAAaA,QAAOC,YAAY,SAASC,QAAQC,UAAU,GAAIC,gBAAeC,KAAKC,EAAEC,OAAOC,MAAMC,QAAS,QAAQC,WAAWC,QAAQ,WAAWP,eAAe,WAAW,QAASQ,GAAcC,EAAIC,GAAG,GAAIC,MAAYC,GAAG,EAASC,GAAG,EAAUC,EAAGC,MAAU,KAAI,IAAI,GAA8BC,GAA1BC,EAAGR,EAAIS,OAAOC,cAAiBP,GAAII,EAAGC,EAAGG,QAAQC,QAAeV,EAAKW,KAAKN,EAAGO,QAAUb,GAAGC,EAAKa,SAASd,GAAjDE,GAAG,IAAwD,MAAMa,GAAKZ,GAAG,EAAKC,EAAGW,EAAK,QAAS,KAAQb,GAAIK,EAAG,WAAUA,EAAG,YAAa,QAAS,GAAGJ,EAAG,KAAMC,IAAK,MAAOH,GAAM,MAAO,UAASF,EAAIC,GAAG,GAAGgB,MAAMC,QAAQlB,GAAM,MAAOA,EAAU,IAAGS,OAAOC,WAAYS,QAAOnB,GAAM,MAAOD,GAAcC,EAAIC,EAAU,MAAM,IAAImB,WAAU,4DAA+D5B,KAAK6B,QAAQ,UAAU5B,EAAED,KAAKC,EAAEC,OAAOF,KAAKE,OAAOC,MAAMH,KAAKG,MAAMC,SAASJ,KAAKI,SAASA,SAAS0B,KAAK,SAAS,SAASC,GAAQA,EAAOC,UAAU,SAASC,GAAK,GAAIC,GAAOC,KAAKC,SAASC,OAAWC,EAAKH,KAAKC,SAASF,EAAYI,KAAKA,EAAKH,KAAKC,SAASF,OAAWI,EAAKL,IAAIA,EAAIK,EAAKC,KAAKtC,EAAEkC,KAAKK,SAAS,aAAaL,KAAKM,QAAO,EAAKN,KAAKK,SAASF,EAAKI,KAAKxC,OAAOyC,cAAcV,EAAIK,EAAKI,MAAMT,GAAKE,KAAKM,QAAO,EAAMN,KAAKK,SAAS,cAAeT,EAAOK,UAAUC,KAAK,EAAEO,KAAK,KAAMxC,SAAS0B,KAAK,gBAAgB,SAASe,GAAM,GAAIH,GAAKG,EAAKH,KAASI,EAAS9C,KAAK+C,QAAQ,WAAY,IAAID,GAAWA,EAASf,QAASW,EAA+C,IAAI,GAAnCM,GAAMF,EAASf,OAAOK,SAAiB3B,EAAE,EAAEwC,EAAIP,EAAKnB,OAAS0B,EAAFxC,EAAMA,IAAI,CAAC,GAAIyC,GAAEF,EAAMJ,OAAWN,EAAKU,EAAME,EAA+C,IAAxCZ,IAAKA,EAAKU,EAAME,OAAMZ,EAAKI,KAAKA,EAAKjC,GAAM6B,EAAKC,KAAK,CAAC,GAAIY,GAAEjD,OAAOyC,cAAcL,EAAKL,IAAIK,EAAKI,KAAMJ,GAAKC,KAAKa,KAAKD,OAAQnD,KAAKqD,WAAWnD,OAAOoD,YAAY,SAASC,OAAO,GAAIC,OAAMzD,eAAewD,MAAM,GAAOE,GAAGD,MAAM,EAAG,KAAIE,KAAKD,IAAK,MAAME,GAAGC,QAAQC,MAAMF","file":"amusement.js","sourcesContent":["'use strict';System.register([],function(_export,_context){var _slicedToArray,main,$,common,state,oneeSama;return {setters:[],execute:function(){_slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally {try{if(!_n&&_i[\"return\"])_i[\"return\"]();}finally {if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else {throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();main=require('./main');$=main.$;common=main.common;state=main.state;oneeSama=main.oneeSama;oneeSama.hook('imouto',function(imouto){imouto.queueRoll=function(bit){var number=this.allRolls.sent++;var info=this.allRolls[number];if(!info)info=this.allRolls[number]={};info.bit=bit;info.$tag=$(this.callback('<strong>'));this.strong=true;this.callback(info.dice?common.readable_dice(bit,info.dice):bit);this.strong=false;this.callback('</strong>');};imouto.allRolls={sent:0,seen:0};});oneeSama.hook('insertOwnPost',function(_ref){var dice=_ref.dice;var postForm=main.request('postForm');if(!postForm||!postForm.imouto||!dice)return;var rolls=postForm.imouto.allRolls;for(var i=0,lim=dice.length;i<lim;i++){var n=rolls.seen++;var info=rolls[n];if(!info)info=rolls[n]={};info.dice=dice[i];if(info.$tag){var r=common.readable_dice(info.bit,info.dice);info.$tag.html(r);}}});main.dispatcher[common.EXECUTE_JS]=function(_ref2){var _ref3=_slicedToArray(_ref2,1);var js=_ref3[0];try{eval(js);}catch(e){console.error(e);}};}};});"],"sourceRoot":"/source/"}
{"version":3,"sources":["posts/render/header.js"],"names":["System","register","_export","_context","_taggedTemplateLiteral","strings","raw","Object","freeze","defineProperties","value","resolveName","data","html","trip","name","auth","escape","lang","anon","alias","undefined","config","staff","classes","readableTime","time","d","Date","pad","getDate","year","getMonth","getFullYear","week","getDay","getHours","getMinutes","relativeTime","then","now","Math","floor","isFuture","just_now","divide","unit","i","length","ago","parseHTML","parseAttributes","options","_templateObject","_templateObject2","setters","_underscore","_util","_lang","_state","_options","execute","renderHeader","num","subject","op","postURL","renderPostURL","renderName","renderTime","email","attrs","class","href","encodeURI","target","mnemonic","renderMnemonic","mnem","title","text","readable","get"],"mappings":"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","file":"posts/render/header.js","sourcesContent":["'use strict';System.register(['underscore','../../util','lang','../../state','../../options'],function(_export,_context){var escape,parseHTML,parseAttributes,pad,lang,config,options,_templateObject,_templateObject2;function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}));}function resolveName(data){var html='';var trip=data.trip;var name=data.name;var auth=data.auth;if(name||!trip){if(name){html+=escape(name);}else {html+=lang.anon;}if(trip){html+=' ';}}if(trip){html+='<code>'+escape(trip)+'</code>';}if(auth){var alias=undefined;if(auth in config.staff.classes){alias=config.staff.classes[auth].alias;}else {alias=auth;}html+=' ## '+alias;}return html;}function readableTime(time){var d=new Date(time);return pad(d.getDate())+' '+lang.time.year[d.getMonth()]+' '+d.getFullYear()+('('+lang.time.week[d.getDay()]+')')+(pad(d.getHours())+':'+pad(d.getMinutes()));}function relativeTime(then,now){var time=Math.floor((now-then)/60000),isFuture=false;if(time<1){if(time>-5){return lang.time.just_now;}else {isFuture=true;time=-time;}}var divide=[60,24,30,12],unit=['minute','hour','day','month'];for(var i=0;i<divide.length;i++){if(time<divide[i]){return lang.ago(time,lang.time[unit[i]],isFuture);}time=Math.floor(time/divide[i]);}return lang.ago(time,lang.time.year,isFuture);}return {setters:[function(_underscore){escape=_underscore.escape;},function(_util){parseHTML=_util.parseHTML;parseAttributes=_util.parseAttributes;pad=_util.pad;},function(_lang){lang=_lang.default;},function(_state){config=_state.config;},function(_options){options=_options.default;}],execute:function(){_templateObject=_taggedTemplateLiteral(['<header>\\n\\t\\t\\t<input type=\"checkbox\" class=\"postCheckbox\">\\n\\t\\t\\t','\\n\\t\\t\\t','\\n\\t\\t\\t','\\n\\t\\t\\t<nav>\\n\\t\\t\\t\\t<a href=\"','\" class=\"history\">\\n\\t\\t\\t\\t\\tNo.\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t<a href=\"','\" class=\"quote\">\\n\\t\\t\\t\\t\\t','\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t</nav>\\n\\t\\t</header>\\n\\t\\t<span class=\"oi control\" data-glyph=\"chevron-bottom\"></span>'],['<header>\\n\\t\\t\\t<input type=\"checkbox\" class=\"postCheckbox\">\\n\\t\\t\\t','\\n\\t\\t\\t','\\n\\t\\t\\t','\\n\\t\\t\\t<nav>\\n\\t\\t\\t\\t<a href=\"','\" class=\"history\">\\n\\t\\t\\t\\t\\tNo.\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t<a href=\"','\" class=\"quote\">\\n\\t\\t\\t\\t\\t','\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t</nav>\\n\\t\\t</header>\\n\\t\\t<span class=\"oi control\" data-glyph=\"chevron-bottom\"></span>']);_templateObject2=_taggedTemplateLiteral(['<time title=\"','\">\\n\\t\\t\\t','\\n\\t\\t</time>'],['<time title=\"','\">\\n\\t\\t\\t','\\n\\t\\t</time>']);function renderHeader(data){var num=data.num;var op=data.op;var subject=data.subject;var postURL=renderPostURL(num);return parseHTML(_templateObject,subject?'<h3>「'+escape(data.subject)+'」</h3>':'',renderName(data),renderTime(data.time),postURL,postURL,num);}_export('renderHeader',renderHeader);function renderName(data){var html='<b class=\"name';var auth=data.auth;var email=data.email;if(auth){html+=' '+(auth==='admin'?'admin':'moderator');}html+='\">';if(email){var attrs={class:'email',href:'mailto:'+encodeURI(email),target:'blank'};html+='<a '+parseAttributes(attrs)+'>';}html+=resolveName(data);if(email){html+='</a>';}html+='</b>';if(data.mnemonic){html+=' '+renderMnemonic(data.mnemonic);}return html;}_export('renderName',renderName);function renderMnemonic(mnemonic){return '<b class=\"mod addr\">'+mnem+'</b>';}_export('renderMnemonic',renderMnemonic);function renderTime(time){var title=undefined,text=undefined;var readable=readableTime(time);if(options.get('relativeTime')){title=readable;text=relativeTime(time,Date.now());}return parseHTML(_templateObject2,title,text||readable);}_export('renderTime',renderTime);function renderPostURL(num){return '#p'+num;}_export('renderPostURL',renderPostURL);}};});"],"sourceRoot":"/source/"}
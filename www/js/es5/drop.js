"use strict";System.register([],function(e,t){function r(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;if(t.length){var r=s.request("postForm");if(r){var o=r.model.attributes;if(o.uploading||o.uploaded)return}else{var n=p.page.get("thread");if(n)s.request("openPostBox",n);else{var u=e.target.closest("section");u&&s.request("openPostBox",i.getNum(u))}}if(r||(r=s.request("postForm")),t.length>1)return void r.uploadError("Too many files.");var d=r.prepareUpload(),f=new FormData;f.append("image",t[0]);for(var l in d)f.append(l,d[l]);var g=new XMLHttpRequest;g.open("POST",i.uploadURL()),g.setRequestHeader("Accept","application/json"),g.onreadystatechange=a,g.send(f),r.notifyUploading()}}function a(){if(4==this.readyState&&202!=this.status){var e=this.responseText;/legitimate imager response/.test(e)||s.request("postForm").uploadError(e)}}function o(e){e.stopPropagation(),e.preventDefault()}function n(e){function t(t,r){e.addEventListener(t,r,!1)}t("dragenter",o),t("dragexit",o),t("dragover",o),t("drop",r)}var s,i,p;return{setters:[],execute:function(){s=require("./main"),i=s.etc,p=s.state,s.isMobile||s.defer(function(){return n(s.$threads[0])})}}});
//# sourceMappingURL=maps/drop.js.map

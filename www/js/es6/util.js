'use strict';System.register(['./main','underscore'],function(_export,_context){var config,escape;return {setters:[function(_main){config=_main.config;},function(_underscore){escape=_underscore.escape;}],execute:function(){function touchable_spoiler_tag(del){del.innerHTML='<del onclick="void(0)">';}_export('touchable_spoiler_tag',touchable_spoiler_tag);function getNum(el){if(!el){return 0;}return parseInt(el.getAttribute('id').slice(1),10);}_export('getNum',getNum);function getID(el){if(!el){return 0;}return getNum(el.closest('article, section'));}_export('getID',getID);function parseEls(string){const el=document.createElement('div');el.innerHTML=string;const children=el.childNodes;return Array.from(children);}_export('parseEls',parseEls);function parseEl(string){const el=document.createElement('div');el.innerHTML=string;return el.firstChild;}_export('parseEl',parseEl);function listener(el,type,selector,handler){el.addEventListener(type,event => {if(event.target.matches(selector)){handler(event);}});}_export('listener',listener);function once(el,type,handler){el.addEventListener(type,event => {handler(event);el.removeEventListener(type,handler);});}_export('once',once);function outerWidth(el){const style=getComputedStyle(el),props=['marginLeft','marginRight','paddingLeft','paddingRight'];let width=0;for(let prop of props){width+=parseInt(style[prop]);}return width;}_export('outerWidth',outerWidth);function isSage(email){if(email){return email.trim()==='sage';}return false;}_export('isSage',isSage);function pick_spoiler(metaIndex){const imgs=config.SPOILER_IMAGES,n=imgs.length;let i;if(metaIndex<0){i=Math.floor(Math.random()*n);}else {i=metaIndex%n;}return {index:imgs[i],next:(i+1)%n};}_export('pick_spoiler',pick_spoiler);const thumbStyles=['small','sharp','hide'];_export('thumbStyles',thumbStyles);function pad(n){return (n<10?'0':'')+n;}_export('pad',pad);function resonableLastN(n){return Number.isInteger(n)&&n<=500;}_export('resonableLastN',resonableLastN);function randomID(len){let id='';for(let i=0;i<len;i++){let char=(Math.random()*36).toString(36)[0];if(Math.random()<0.5){char=char.toUpperCase();}id+=char;}return id;}_export('randomID',randomID);function parseHTML(callSite){let output=callSite[0];for(let i=1;i<=arguments.length-1;i++){output+=(arguments.length<=i-1+1?undefined:arguments[i-1+1])+callSite[i];}return output.replace(/\s*\n\s*/g,'');}_export('parseHTML',parseHTML);function parseAttributes(attrs){let html='';for(let key in attrs){html+=' ';const val=attrs[key];if(val===true){html+=key;}else if(val||val===0){html+=`${ key }="${ val }"`;}}return html;}_export('parseAttributes',parseAttributes);function commaList(items){let html='';for(let item of items){if(html){html+=', ';}html+=item;}return html;}_export('commaList',commaList);function checkAuth(action){const cls=config.staff.classes[main.ident&&main.ident.auth];return cls&&!!cls.rights[action];}_export('checkAuth',checkAuth);}};});
//# sourceMappingURL=maps/util.js.map

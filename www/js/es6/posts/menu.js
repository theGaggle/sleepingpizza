'use strict';System.register([],function(_export,_context){return {setters:[],execute:function(){const main=require('../main');const $=main.$;const _=main._;const Backbone=main.Backbone;const common=main.common;const util=main.util;const lang=main.lang;const state=main.state;const MenuView=module.exports=Backbone.View.extend({className:'popup-menu glass',tagName:'ul',actions:['report','hide'],events:{click:'handleClick'},initialize(_ref){let parent=_ref.parent;parent._popup_menu=this;this.parent=parent;this.render();},render(){let html='';for(let action of this.actions){html+=`<li data-type="${ action }">${ lang[action] }</li>`;}const el=this.el;const parent=this.parent;el.innerHTML=html;parent.append(el);el.style.left=el.getBoundingClientRect().left-(util.outerWidth(el)+el.offsetWidth)*0.6+'px';},handleClick(e){e.stopPropagation();main.request(e.target.getAttribute('data-type'),this.model);this.remove();},remove(){this.parent._popup_menu=null;this.el.remove();this.stopListening();}});main.reply('menu:extend',action => _.extend(MenuView.prototype.actions,action));main.$threads.on('click','.control',event => {const target=event.target;if(target._popup_menu)return target._popup_menu.remove();const model=util.getModel(target);if(model)new MenuView({parent:target,model});});}};});
//# sourceMappingURL=../maps/posts/menu.js.map

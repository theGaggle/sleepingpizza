'use strict';System.register([],function(_export,_context){return {setters:[],execute:function(){const main=require('../main');const PostCommon=require('./common');const $=main.$;const _=main._;const Backbone=main.Backbone;const util=main.util;const oneeSama=main.oneeSama;const state=main.state;module.exports=PostCommon.extend({tagName:'section',render(){const attrs=this.model.attributes;this.setElement(oneeSama.section(attrs)).insertIntoDOM();const reply=util.parseDOM(oneeSama.replyBox());if(attrs.num in state.ownPosts||!!main.request('postForm'))reply.style.display='none';this.el.append(reply);this.el.nextElementSibling.remove();return this;},insertIntoDOM(){main.$threads[0].query('aside').after(this.el,document.createElement('hr'));this.fun();},renderLocked(locked){this.el.classList[locked?'add':'remove']('locked');},remove(){this.el.nextElementSibling.remove();this.el.remove();this.stopListening();return this;},shiftReplies(postForm){const attrs=this.model.attributes;const replies=attrs.replies;let lim=state.hotConfig.get('ABBREVIATED_REPLIES'),changed;if(postForm)lim--;const len=replies.slice().length;for(let i=len;i>lim;i--){const post=state.posts.get(replies.shift());if(!post)continue;if(post.get('image'))attrs.image_omit++;attrs.omit++;changed=true;post.remove();}if(changed)this.renderOmit(attrs.omit,attrs.image_omit);},renderOmit(){let omit=arguments.length<=0||arguments[0]===undefined?this.model.get('omit'):arguments[0];let image_omit=arguments.length<=1||arguments[1]===undefined?this.model.get('image_omit'):arguments[1];if(omit===0)return;var _state$page$attribute=state.page.attributes;const thread=_state$page$attribute.thread;const href=_state$page$attribute.href;this.el.query('.omit').innerHTML=oneeSama.lang.abbrev_msg(omit,this.model.get('image_omit'),thread&&href.split('?')[0]);},bumpThread(){this.el.nextElementSibling.remove();this.el.remove();this.insertIntoDOM();}});}};});
//# sourceMappingURL=../maps/posts/section.js.map
